<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PCB Panelizer</title>
  <link rel="icon" type="image/png" href="/lt.png">
  <link rel="stylesheet" href="/static/panel_1.css">
</head>
<body class="panelizer-app">
  <header class="page-header">
    <h1>PCB Panelizer by LT</h1>
  </header>

  <div class="page-layout panelizer-layout">
    <div class="page-main">
      <form method="GET" id="panelizer-form" novalidate>
        <section>
          <h2>Single PCB</h2>
          <div class="grid">
            <label>Single width (SPW, mm)
              <input type="number" step="0.1" name="SPW" id="SPW" value="{{VAL_SPW}}">
            </label>
            <label>Single length (SPL, mm)
              <input type="number" step="0.1" name="SPL" id="SPL" value="{{VAL_SPL}}">
            </label>
            <label class="checkbox-field">Allow rotate single
              <input type="checkbox" name="ARS" id="ARS" {{CHK_ARS}}>
            </label>
          </div>
        </section>

        <section>
          <h2>Working Panel</h2>
          <div class="grid">
            <label>Panel edge width (EW_w, mm)
              <input type="number" step="0.1" name="EW_w" id="EW_w" value="{{VAL_EW_w}}">
            </label>
            <label>Panel edge length (EW_l, mm)
              <input type="number" step="0.1" name="EW_l" id="EW_l" value="{{VAL_EW_l}}">
            </label>
          </div>
          <div class="panel-set-group">
            <p>Panel sets</p>
            <div class="panel-set-options">
              <label class="panel-set-option"><input type="checkbox" name="SET_A" id="SET_A" {{CHK_SET_A}}><span>A: 1245 x 1041</span></label>
              <label class="panel-set-option"><input type="checkbox" name="SET_B" id="SET_B" {{CHK_SET_B}}><span>B: 1245 x 1092</span></label>
              <label class="panel-set-option"><input type="checkbox" name="SET_C" id="SET_C" {{CHK_SET_C}}><span>C: 1295 x 1092</span></label>
              <label class="panel-set-option"><input type="checkbox" name="SET_D" id="SET_D" {{CHK_SET_D}}><span>D: 1245 x 2082</span></label>
              <label class="panel-set-option"><input type="checkbox" name="SET_E" id="SET_E" {{CHK_SET_E}}><span>E: 1295 x 2184</span></label>
            </div>
          </div>
        </section>

        <section>
          <h2>Board Edge Margins</h2>
          <div class="grid">
            <label>Board edge margin width (BMW, mm)
              <input type="number" step="0.1" name="BMW" id="BMW" value="{{VAL_BMW}}">
            </label>
            <label>Board edge margin length (BML, mm)
              <input type="number" step="0.1" name="BML" id="BML" value="{{VAL_BML}}">
            </label>
          </div>
        </section>

        <section>
          <h2>Customer Board Limits</h2>
          <div class="grid">
            <label>Max board width (CBW, mm)
              <input type="number" step="0.1" name="CBW" id="CBW" value="{{VAL_CBW}}">
            </label>
            <label>Max board length (CBL, mm)
              <input type="number" step="0.1" name="CBL" id="CBL" value="{{VAL_CBL}}">
            </label>
            <label>Min board width (CBWM, mm)
              <input type="number" step="0.1" name="CBWM" id="CBWM" value="{{VAL_CBWM}}">
            </label>
            <label>Min board length (CBLM, mm)
              <input type="number" step="0.1" name="CBLM" id="CBLM" value="{{VAL_CBLM}}">
            </label>
            <label class="checkbox-field">Allow rotate board
              <input type="checkbox" name="ARB" id="ARB" {{CHK_ARB}}>
            </label>
          </div>
        </section>

        <section>
          <h2>Gaps</h2>
          <div class="grid">
            <label>Inter-board gap W (CW, mm)
              <input type="number" step="0.1" name="CW" id="CW" value="{{VAL_CW}}">
            </label>
            <label>Inter-board gap L (CL, mm)
              <input type="number" step="0.1" name="CL" id="CL" value="{{VAL_CL}}">
            </label>
            <label>Inter-single gap W (SW, mm)
              <input type="number" step="0.1" name="SW" id="SW" value="{{VAL_SW}}">
            </label>
            <label>Inter-single gap L (SL, mm)
              <input type="number" step="0.1" name="SL" id="SL" value="{{VAL_SL}}">
            </label>
            <label>Kerf (adds to all gaps, mm)
              <input type="number" step="0.1" name="KERF" id="KERF" value="{{VAL_KERF}}">
            </label>
          </div>
        </section>

        <section class="form-controls">
          <h2>Display</h2>
          <div class="grid">
            <label>Max rows
              <input type="number" step="1" name="LIMIT" id="LIMIT" value="{{VAL_LIMIT}}">
            </label>
            <p class="badge">{{STAR_BADGE}}</p>
          </div>
        </section>
      </form>
    </div>
  </div>

  <div id="results">
    <p class="small" id="results-message">{{RESULTS_MESSAGE}}</p>
    <table id="results-table" {{RESULTS_TABLE_ATTRS}}>
      <thead>
        <tr>
          <th class="l">Rank</th>
          <th>PCBs/Jumbo</th>
          <th>PCBs/Panel</th>
          <th>Panel WxL</th>
          <th>Board WxL</th>
          <th>Board size (mm)</th>
          <th>Panel style</th>
          <th>Panel size (mm)</th>
          <th>Utilization</th>
          <th>Rotation</th>
        </tr>
      </thead>
      <tbody>
        {{RESULTS_ROWS}}
      </tbody>
    </table>
  </div>

  <script>
  (function(){
    const f=document.getElementById('panelizer-form');
    if(!f) return;
    let pending=false;
    const submit=()=>{pending=false; if(typeof f.requestSubmit==='function'){f.requestSubmit();}else{f.submit();}};
    const queue=window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(cb){return setTimeout(cb,0);};
    const schedule=()=>{if(pending)return;pending=true;queue(submit);};
    f.addEventListener('input',schedule);
    f.addEventListener('change',schedule);
  })();
  </script>
</body>
</html>
